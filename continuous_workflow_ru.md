# Предложение по улучшению работы с системой контроля версий (для команды blackwell)

### Введение

1. работа с системой контроля версий не должна занимать у разработчика больше времени, чем необходимо на сборку, описание и отправку коммита
2. любая работа сверх этого возникает из-за неправильно выстроенного процесса, либо из-за нарушений процесса разработчиком 

### Текущая ситуация

мы тратим время на:
- создание и пересборку веток (0-1 час на ветку)
- сливание веток в **dev** (0-3 часа на ветку)
- подготовку веток для передачи на **stg** (15-30 часов в месяц)
- исправление ошибок вызваных конфликтами внутри VCS (20-80 часов в месяц)

### Причины

- разработка идет последовательно: последующие коммиты и фичи зависят от предыдущих.
  из-за этого мы часто либо не можем создать ветку из **master**, либо вынуждены собирать в нее предыдущие коммиты просто чтобы начать работать
- так собранные ветки потом конфликтуют при сливании их в **dev** и подготовке для отправки на **stg**
- когда нам бывает нужно добавить фичу для своих нужд, вместо того что бы иметь к ней доступ сразу же по исполнению нам приходится ждать
  следующего релиза (мы тратим время на то, что бы протащить ее в свои рабочие ветки, а потом чиним конфликты вызванные этим) 

### Требования к процессу

Внешние
1. внешнее code-review
2. возможность исключать выбранный коммит из релиза

Внутренние
1. минимизация конфликтов в VCS
2. последовательность в разработке
3. быстрота доставки изменений
4. интеграция рабочей ветки (веток) с CI
5. автоматизированное code-review

### Анализ

Текущая ситуация уже максимально приближена к основным принипам continuous integration:
- доставка изменений несколько раз в день (есть)
- все изменения автоматически проверяются в CI (eсть)
- CI должен отрабатывать быстро (приемлемо)

### Предложение

1. продолжаем разработку в отдельных ветках, но ведем их последовательно (каждая следующая начинает из предыдущей)
2. все ветки сразу по готовности складываем в **dev**
3. заводим отдельную ветку для внешнего ревью **reviewed** или **approved** куда создаем пул-реквесты
4. для передачи кода на **stg** форкаем из ветки **reviewed** в нужном месте
5. при необходимости убрать фичу из релиза (отказ пул-реквеста в ветку **reviewed**) убираем ее из дева ребейзом

Это даст нам консистентный код, отсутствие конфликтов в VCS, освободит время и исключит ошибки связанные с процессом разработки.

### Затраты

Переход к предлагаемому процессу не требует затрат.
